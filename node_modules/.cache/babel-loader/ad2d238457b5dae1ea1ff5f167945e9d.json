{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\React\\\\project\\\\src\\\\components\\\\Member\\\\MemberPhotoImg.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport { MdCameraAlt } from 'react-icons/md';\nimport { devUrl } from '../../config';\nimport { withRouter } from 'react-router-dom';\n\nfunction MemberPhotoImg(props) {\n  _s();\n\n  const [member, setMember] = useState([]);\n  const [member_img, setMemberImg] = useState([]);\n  useEffect(() => {\n    Axios.get(`http://localhost:3001/member/get/${props.match.params.id}`).then(async response => {\n      const val = await response.json();\n      setMember({\n        response: val,\n        error: !response.ok,\n        loading: false\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }, []);\n\n  const UpdateMemberImg = member_id => {\n    console.log(member_img);\n    Axios.put('http://localhost:3001/member/update/img', {\n      member_id: member_id,\n      member_img: member_img\n    }).then(res => {\n      setMember(member.map(val => {\n        return val.member_id === member_id ? {\n          member_id: val.member_id,\n          member_img: val.member_img\n        } : val;\n      }));\n    });\n  };\n\n  function upUp() {\n    setTimeout(function () {\n      document.getElementById('putmemphoto-button-file').click(); // setTimeout(window.location.reload(), 500)\n    }, 500);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: member.map(val => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mem_img_box \",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"mem_img rounded-circle\",\n            style: {\n              width: '160px',\n              height: '160px',\n              cursor: ' pointer '\n            },\n            variant: \"top\",\n            src: devUrl + `/pic/mem_img/${val.member_img}`,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"position-relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"\",\n            style: {\n              display: 'none'\n            },\n            id: \"iconmemphoto-button-file\",\n            type: \"file\",\n            onChange: e => {\n              setMemberImg(e.target.value.split('\\\\').pop());\n              upUp();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              display: 'none'\n            },\n            id: \"putmemphoto-button-file\",\n            onClick: () => {\n              UpdateMemberImg(val.member_id);\n            },\n            children: \"\\u4E0A\\u50B3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"iconmemphoto-button-file\",\n            children: /*#__PURE__*/_jsxDEV(MdCameraAlt, {\n              \"aria-label\": \"upload picture\",\n              component: \"span\",\n              title: \"\\u9078\\u64C7\\u7167\\u7247\\u4E0A\\u50B3\",\n              className: \" position-absolute  translate-middle \",\n              style: {\n                width: '42px',\n                height: '42px',\n                top: '40px',\n                right: '-5px',\n                color: '#104b6d',\n                cursor: ' pointer '\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false);\n}\n\n_s(MemberPhotoImg, \"3njCJtj4szEgaj3IFc+FBppEXHM=\");\n\n_c = MemberPhotoImg;\nexport default _c2 = withRouter(MemberPhotoImg);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MemberPhotoImg\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/user/React/project/src/components/Member/MemberPhotoImg.js"],"names":["React","useState","useEffect","Axios","MdCameraAlt","devUrl","withRouter","MemberPhotoImg","props","member","setMember","member_img","setMemberImg","get","match","params","id","then","response","val","json","error","ok","loading","catch","console","UpdateMemberImg","member_id","log","put","res","map","upUp","setTimeout","document","getElementById","click","width","height","cursor","display","e","target","value","split","pop","top","right","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { MdCameraAlt } from 'react-icons/md'\r\nimport { devUrl } from '../../config'\r\nimport { withRouter } from 'react-router-dom'\r\nfunction MemberPhotoImg(props) {\r\n  const [member, setMember] = useState([])\r\n  const [member_img, setMemberImg] = useState([])\r\n\r\n  useEffect(() => {\r\n    Axios.get(`http://localhost:3001/member/get/${props.match.params.id}`)\r\n      .then(async (response) => {\r\n        const val = await response.json()\r\n        setMember({\r\n          response: val,\r\n          error: !response.ok,\r\n          loading: false,\r\n        })\r\n      })\r\n      .catch((error) => {\r\n        console.error(error)\r\n      })\r\n  }, [])\r\n\r\n  const UpdateMemberImg = (member_id) => {\r\n    console.log(member_img)\r\n\r\n    Axios.put('http://localhost:3001/member/update/img', {\r\n      member_id: member_id,\r\n      member_img: member_img,\r\n    }).then((res) => {\r\n      setMember(\r\n        member.map((val) => {\r\n          return val.member_id === member_id\r\n            ? {\r\n                member_id: val.member_id,\r\n                member_img: val.member_img,\r\n              }\r\n            : val\r\n        })\r\n      )\r\n    })\r\n  }\r\n\r\n  function upUp() {\r\n    setTimeout(function () {\r\n      document.getElementById('putmemphoto-button-file').click()\r\n      // setTimeout(window.location.reload(), 500)\r\n    }, 500)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {member.map((val) => {\r\n        return (\r\n          <div className=\"d-flex justify-content-center align-items-center\">\r\n            <div className=\"mem_img_box \">\r\n              <img\r\n                className=\"mem_img rounded-circle\"\r\n                style={{\r\n                  width: '160px',\r\n                  height: '160px',\r\n                  cursor: ' pointer ',\r\n                }}\r\n                variant=\"top\"\r\n                src={devUrl + `/pic/mem_img/${val.member_img}`}\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"position-relative\">\r\n              <input\r\n                className=\"\"\r\n                style={{ display: 'none' }}\r\n                id=\"iconmemphoto-button-file\"\r\n                type=\"file\"\r\n                onChange={(e) => {\r\n                  setMemberImg(e.target.value.split('\\\\').pop())\r\n                  upUp()\r\n                }}\r\n              />\r\n\r\n              <button\r\n                style={{ display: 'none' }}\r\n                id=\"putmemphoto-button-file\"\r\n                onClick={() => {\r\n                  UpdateMemberImg(val.member_id)\r\n                }}\r\n              >\r\n                上傳\r\n              </button>\r\n\r\n              <label htmlFor=\"iconmemphoto-button-file\">\r\n                <MdCameraAlt\r\n                  aria-label=\"upload picture\"\r\n                  component=\"span\"\r\n                  title=\"選擇照片上傳\"\r\n                  className=\" position-absolute  translate-middle \"\r\n                  style={{\r\n                    width: '42px',\r\n                    height: '42px',\r\n                    top: '40px',\r\n                    right: '-5px',\r\n                    color: '#104b6d',\r\n                    cursor: ' pointer ',\r\n                  }}\r\n                />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\nexport default withRouter(MemberPhotoImg)\r\n"]},"metadata":{},"sourceType":"module"}